<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
          integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp"
          crossorigin="anonymous"> -->
<title>이상한 게임...?</title>

      <style>

        h1{
            margin-left: 20px;
        }

        table{
          margin-top: -15px;
          border: 1px solid black;
          background: #D4F4FA;
        }
        .btn{
          width: 40px;
          height: 40px;
          font-size: 20px;
          text-align: center;
          background: #FFFF99;
        }

        #mix{
          margin: 5px;
          margin-left: 65px;
          width: 50px;
          height: 30px;
          text-align: center;
          color: white;
          background: gray;
        }
      </style>
  </head>
  <body>
    <table>
      <thead>
        <h1>퍼즐 게임<h1>
      </thead>
      <tbody>
      <tr>
        <td><button type="button" onclick="Cbtn1()" id = 'btn1' class="btn" value ="0"></button></td>
        <td><button type="button" onclick="Cbtn2()" id = 'btn2' class="btn" value ="1"></button></td>
        <td><button type="button" onclick="Cbtn3()" id = 'btn3' class="btn" value ="2"></button></td>
        <td><button type="button" onclick="Cbtn4()" id = 'btn4' class="btn" value ="3"></button></td>
      </tr>
      <tr>
        <td><button type="button" onclick="Cbtn1()" id = 'btn5' class="btn" value ="4"></button></td>
        <td><button type="button" onclick="Cbtn6()" id = 'btn6' class="btn" value ="5"></button></td>
        <td><button type="button" onclick="Cbtn7()" id = 'btn7' class="btn" value ="6"></button></td>
        <td><button type="button" onclick="Cbtn8()" id = 'btn8' class="btn" value ="7"></button></td>
      </tr>
      <tr>
        <td><button type="button" onclick="Cbtn9()" id = 'btn9' class="btn" value ="8"></button></td>
        <td><button type="button" onclick="Cbtn10()" id = 'btn10' class="btn" value ="9"></button></td>
        <td><button type="button" onclick="Cbtn11()" id = 'btn11' class="btn" value ="10"></button></td>
        <td><button type="button" onclick="Cbtn12()" id = 'btn12' class="btn" value ="11"></button></td>
      </tr>
      <tr>
        <td><button type="button" onclick="Cbtn13()" id = 'btn13' class="btn" value ="12"></button></td>
        <td><button type="button" onclick="Cbtn14()" id = 'btn14' class="btn" value ="13"></button></td>
        <td><button type="button" onclick="Cbtn15()" id = 'btn15' class="btn" value ="14"></button></td>
        <td><button type="button" onclick="Cbtn16()" id = 'btn16' class="btn" value ="15"></button></td>
      </tr>
    </tbody>
    </table>
    <button type="button" onclick="mixed()" id = 'mix'>섞기</button>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">

    var gamepad =
    [[1,2,3,4],
      [5,6,7,8],
      [9,10,11,12],
      [13,14,15,""]];

    createGamePan()

    function createGamePan(){
      var no = 1;
      for(var i = 0; i <= 3; i++){
        for(var j = 0; j <= 3; j++){
          $('#btn'+no).text(gamepad[i][j])
          no++;
        }
      }
    }

    function mixed() {
      for(var i = 0; i <= 15; i++){
        swap(parseInt(Math.random() * 4),
             parseInt(Math.random() * 4),
             parseInt(Math.random() * 4),
             parseInt(Math.random() * 4));
      }
      createGamePan()
    }

    function swap(i, j, x, y){
      temp = gamepad[i][j]
      gamepad[i][j] = gamepad[x][y]
      gamepad[x][y] = temp
    }

    function clickBtn(no) {
        x = parseInt(($('#btn'+no).val()) / 4);
        y = (($('#btn'+no).val()) % 4 );

        //-1, 4 일때 예외 추가...;

        if(gamepad[x][y+1] == ""){
          swap(x,y,x,y+1)
        }
        else if(gamepad[x][y-1] == ""){
          swap(x,y,x,y-1)
        }
        else if(gamepad[x+1][y] == ""){
          swap(x+1,y,x,y)
        }
        else if(gamepad[x-1][y] == ""){
          swap(x-1,y,x,y)
        }
        createGamePan()
    }

    function Cbtn1() {
      clickBtn(1)
    }

    </script>
  </body>
</html>
