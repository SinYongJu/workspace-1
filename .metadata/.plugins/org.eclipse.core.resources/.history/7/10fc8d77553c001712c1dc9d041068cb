/* File I/O - 바이너리 스트림 클래스 - ByteArrayOutputStream
 * =>  
 */
package step16;

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.FileInputStream;
import java.io.FileOutputStream;

public class Test03_2 {

  public static void main(String[] args) throws Exception{
    ByteArrayOutputStream out = new ByteArrayOutputStream();
  
    byte b = 0x11;
    short s = 0x2233;
    int i = 0x44556677;
    String str =  "ABC가각간";
    
    out.write(b);
   
    out.write(s >> 8);
    out.write(s);
    
    out.write(i >> 24);
    out.write(i >> 16);
    out.write(i >> 8);
    out.write(i);
    
    byte[] bytes = str.getBytes("UTF-8");
    int len = bytes.length;
    out.write(len >> 8);
    out.write(len);
    out.write(bytes);
    
    byte[] buf = out.toByteArray();
    out.close();
    
    
    ByteArrayInputStream in = new ByteArrayInputStream(buf);
  
    byte b;
    b = (byte)in.read();
    
    short s;
    s = (short)(in.read() << 8);
    s |= (short)(in.read());
    
    int i;
    i = (in.read() << 24);
    i |= (in.read() << 16);
    i |= (in.read() << 8);
    i |= (in.read());
    
  
    int len;
    len = (in.read() << 24);
    len |= (in.read() << 16);
    len |= (in.read() << 8);
    len |= (in.read());
    
    // 문자열 배열의 크기 만큼 바이트 배열을 만든다.
    byte[] buf = new byte[len];
    // 문자열 배열을 읽어 바이트 배열에 저장한다.
    in.read(buf);
    // 바이트 배열에 들어 있는 값을 가지고
    // => 이때
    String str = new String(buf, "UTF-8");
    
    in.close();
  }
}
